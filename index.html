<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<meta name="description" content="Quickly and easily add a progress flag around your profile picture" />
		<title>Show your support of #TheProgressTrain on your social media</title>
		
		<meta name="og:title" content="Show your support of #TheProgressTrain on your social media" />
		<meta name="og:description" content="Quickly and easily add a progress flag around your profile picture" />
		<meta name="og:image" content="https://theprogresstrain.netlify.app/social.png" />
		
		<meta name="twitter:card" content="summary_large_image" />
		<meta name="twitter:title" content="Show your support of #TheProgressTrain on your social media" />
		<meta name="twitter:description" content="Quickly and easily add a progress flag around your profile picture" />
		<meta name="twitter:image" content="https://theprogresstrain.netlify.app/social.png" />
		
		<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css2?family=Hammersmith+One&display=swap" />
		<link rel="stylesheet" type="text/css" href="https://unpkg.com/tailwindcss@^1.0/dist/tailwind.min.css" />
		<style>
			*,
			*::before,
			*::after {
				-webkit-box-sizing: border-box;
				   -moz-box-sizing: border-box;
					-ms-box-sizing: border-box;
					 -o-box-sizing: border-box;
						box-sizing: border-box;
			}
			
			html,
			body {
				width: 100%;
				height: 100%;
				margin: 0;
				padding: 0;
			}
			
			.font-hammersmith {
				font-family: "Hammersmith One", sans-serif;
			}
			
			.text-stroke {
				-webkit-text-stroke-width: 2px;
				-webkit-text-stroke-color: black;
			}
			
			.rainbow-bg {
				background: rgb(255,255,255);
				background: -moz-linear-gradient(125deg, rgba(255,255,255,1) 0%, rgba(255,255,255,1) 5%, rgba(255,168,203,1) 5%, rgba(255,168,203,1) 10%, rgba(255,168,203,1) 15%, rgba(115,215,238,1) 15%, rgba(115,215,238,1) 20%, rgba(115,215,238,1) 25%, rgba(96,52,19,1) 25%, rgba(96,52,19,1) 30%, rgba(96,52,19,1) 35%, rgba(3,3,3,1) 35%, rgba(3,3,3,1) 40%, rgba(3,3,3,1) 45%, rgba(212,6,6,1) 45%, rgba(212,6,6,1) 50%, rgba(212,6,6,1) 55%, rgba(240,157,3,1) 55%, rgba(240,157,3,1) 60%, rgba(240,157,3,1) 65%, rgba(229,254,4,1) 65%, rgba(229,254,4,1) 70%, rgba(229,254,4,1) 75%, rgba(10,191,2,1) 75%, rgba(10,191,2,1) 80%, rgba(10,191,2,1) 85%, rgba(8,25,155,1) 85%, rgba(8,25,155,1) 90%, rgba(8,25,155,1) 95%, rgba(114,3,142,1) 95%, rgba(114,3,142,1) 100%);
				background: -webkit-linear-gradient(125deg, rgba(255,255,255,1) 0%, rgba(255,255,255,1) 5%, rgba(255,168,203,1) 5%, rgba(255,168,203,1) 10%, rgba(255,168,203,1) 15%, rgba(115,215,238,1) 15%, rgba(115,215,238,1) 20%, rgba(115,215,238,1) 25%, rgba(96,52,19,1) 25%, rgba(96,52,19,1) 30%, rgba(96,52,19,1) 35%, rgba(3,3,3,1) 35%, rgba(3,3,3,1) 40%, rgba(3,3,3,1) 45%, rgba(212,6,6,1) 45%, rgba(212,6,6,1) 50%, rgba(212,6,6,1) 55%, rgba(240,157,3,1) 55%, rgba(240,157,3,1) 60%, rgba(240,157,3,1) 65%, rgba(229,254,4,1) 65%, rgba(229,254,4,1) 70%, rgba(229,254,4,1) 75%, rgba(10,191,2,1) 75%, rgba(10,191,2,1) 80%, rgba(10,191,2,1) 85%, rgba(8,25,155,1) 85%, rgba(8,25,155,1) 90%, rgba(8,25,155,1) 95%, rgba(114,3,142,1) 95%, rgba(114,3,142,1) 100%);
				background: linear-gradient(125deg, rgba(255,255,255,1) 0%, rgba(255,255,255,1) 5%, rgba(255,168,203,1) 5%, rgba(255,168,203,1) 10%, rgba(255,168,203,1) 15%, rgba(115,215,238,1) 15%, rgba(115,215,238,1) 20%, rgba(115,215,238,1) 25%, rgba(96,52,19,1) 25%, rgba(96,52,19,1) 30%, rgba(96,52,19,1) 35%, rgba(3,3,3,1) 35%, rgba(3,3,3,1) 40%, rgba(3,3,3,1) 45%, rgba(212,6,6,1) 45%, rgba(212,6,6,1) 50%, rgba(212,6,6,1) 55%, rgba(240,157,3,1) 55%, rgba(240,157,3,1) 60%, rgba(240,157,3,1) 65%, rgba(229,254,4,1) 65%, rgba(229,254,4,1) 70%, rgba(229,254,4,1) 75%, rgba(10,191,2,1) 75%, rgba(10,191,2,1) 80%, rgba(10,191,2,1) 85%, rgba(8,25,155,1) 85%, rgba(8,25,155,1) 90%, rgba(8,25,155,1) 95%, rgba(114,3,142,1) 95%, rgba(114,3,142,1) 100%);
			}
			
			.rainbow-bg:hover {
				background: rgb(255,255,255);
				background: -moz-linear-gradient(125deg, rgba(255,255,255,0.5) 0%, rgba(255,255,255,0.5) 5%, rgba(255,168,203,0.5) 5%, rgba(255,168,203,0.5) 10%, rgba(255,168,203,0.5) 15%, rgba(115,215,238,0.5) 15%, rgba(115,215,238,0.5) 20%, rgba(115,215,238,0.5) 25%, rgba(96,52,19,0.5) 25%, rgba(96,52,19,0.5) 30%, rgba(96,52,19,0.5) 35%, rgba(3,3,3,0.5) 35%, rgba(3,3,3,0.5) 40%, rgba(3,3,3,0.5) 45%, rgba(212,6,6,0.5) 45%, rgba(212,6,6,0.5) 50%, rgba(212,6,6,0.5) 55%, rgba(240,157,3,0.5) 55%, rgba(240,157,3,0.5) 60%, rgba(240,157,3,0.5) 65%, rgba(229,254,4,0.5) 65%, rgba(229,254,4,0.5) 70%, rgba(229,254,4,0.5) 75%, rgba(10,191,2,0.5) 75%, rgba(10,191,2,0.5) 80%, rgba(10,191,2,0.5) 85%, rgba(8,25,155,0.5) 85%, rgba(8,25,155,0.5) 90%, rgba(8,25,155,0.5) 95%, rgba(114,3,142,0.5) 95%, rgba(114,3,142,0.5) 100%);
				background: -webkit-linear-gradient(125deg, rgba(255,255,255,0.5) 0%, rgba(255,255,255,0.5) 5%, rgba(255,168,203,0.5) 5%, rgba(255,168,203,0.5) 10%, rgba(255,168,203,0.5) 15%, rgba(115,215,238,0.5) 15%, rgba(115,215,238,0.5) 20%, rgba(115,215,238,0.5) 25%, rgba(96,52,19,0.5) 25%, rgba(96,52,19,0.5) 30%, rgba(96,52,19,0.5) 35%, rgba(3,3,3,0.5) 35%, rgba(3,3,3,0.5) 40%, rgba(3,3,3,0.5) 45%, rgba(212,6,6,0.5) 45%, rgba(212,6,6,0.5) 50%, rgba(212,6,6,0.5) 55%, rgba(240,157,3,0.5) 55%, rgba(240,157,3,0.5) 60%, rgba(240,157,3,0.5) 65%, rgba(229,254,4,0.5) 65%, rgba(229,254,4,0.5) 70%, rgba(229,254,4,0.5) 75%, rgba(10,191,2,0.5) 75%, rgba(10,191,2,0.5) 80%, rgba(10,191,2,0.5) 85%, rgba(8,25,155,0.5) 85%, rgba(8,25,155,0.5) 90%, rgba(8,25,155,0.5) 95%, rgba(114,3,142,0.5) 95%, rgba(114,3,142,0.5) 100%);
				background: linear-gradient(125deg, rgba(255,255,255,0.5) 0%, rgba(255,255,255,0.5) 5%, rgba(255,168,203,0.5) 5%, rgba(255,168,203,0.5) 10%, rgba(255,168,203,0.5) 15%, rgba(115,215,238,0.5) 15%, rgba(115,215,238,0.5) 20%, rgba(115,215,238,0.5) 25%, rgba(96,52,19,0.5) 25%, rgba(96,52,19,0.5) 30%, rgba(96,52,19,0.5) 35%, rgba(3,3,3,0.5) 35%, rgba(3,3,3,0.5) 40%, rgba(3,3,3,0.5) 45%, rgba(212,6,6,0.5) 45%, rgba(212,6,6,0.5) 50%, rgba(212,6,6,0.5) 55%, rgba(240,157,3,0.5) 55%, rgba(240,157,3,0.5) 60%, rgba(240,157,3,0.5) 65%, rgba(229,254,4,0.5) 65%, rgba(229,254,4,0.5) 70%, rgba(229,254,4,0.5) 75%, rgba(10,191,2,0.5) 75%, rgba(10,191,2,0.5) 80%, rgba(10,191,2,0.5) 85%, rgba(8,25,155,0.5) 85%, rgba(8,25,155,0.5) 90%, rgba(8,25,155,0.5) 95%, rgba(114,3,142,0.5) 95%, rgba(114,3,142,0.5) 100%);
			}
		</style>
	</head>
	<body>
		<div id="app" class="flex flex-col">
			<div class="flex-grow py-3 sm:py-6"></div>
			<div class="px-4 mx-auto sm:w-2/3 md:w-1/2 lg:w-1/3">
				<h1 class="font-hammersmith font-bold text-3xl sm:text-4xl text-pink-600 leading-none mb-4">
					#TheProgressTrain<br/>Profile Pic Generator
				</h1>
				
				<h2 class="font-hammersmith text-2xl sm:text-3xl text-gray-800 leading-tight">1. Upload</h2>
				<p class="font-hammersmith text-lg sm:text-xl text-gray-600 leading-tight mb-5">Make sure to crop your photo into a square before uploading it</p>
				<input ref="imageUpload" @change="handleImage" class="hidden" type="file" accept="image/*" />
				<a @click="startUpload" @keypress.enter="startUpload" tabindex="0" class="font-hammersmith text-xl leading-none rounded-lg cursor-pointer" style="padding: 7px 15px 6px;" :class="{ 'text-pink-100 bg-pink-600 hover:bg-pink-700 focus:bg-pink-700': uploaded == null, 'text-pink-700 bg-pink-200 hover:bg-pink-300 focus:bg-pink-300': uploaded != null }">
					CLICK TO UPLOAD
				</a>
				
				<h2 class="font-hammersmith text-2xl sm:text-3xl text-gray-800 leading-tight mt-8 mb-1">2. Frame</h2>
				<div class="mb-2 font-hammersmith">
					<a v-for="(s, key) in slogans" :key="key" @click="chooseOverlay(key)" @keypress.enter="chooseOverlay(slogan)" tabindex="0" class="block mb-1 text-xl leading-none rounded-lg cursor-pointer border-2 border-solid focus:outline-none" style="padding: 9px 13px 8px;" :class="{ 'text-pink-600 bg-pink-100 border-pink-600': slogan == key, 'text-gray-600 bg-transparent border-gray-500 hover:border-gray-800 focus:border-gray-800 hover:text-gray-800 focus:text-gray-800': slogan != key }">
						{{ s }}
					</a>
				</div>
				
				<h2 class="font-hammersmith text-2xl sm:text-3xl text-gray-800 leading-tight mt-6 mb-1">3. Save</h2>
				<div v-if="result == ''" class="p-24 bg-gray-300 mb-4 rounded-lg"></div>
				<img v-if="result != ''" :src="result" alt="Result image" class="bg-gray-300 mb-4 rounded-lg border-2 border-solid border-gray-500" />
				
				<a v-if="result == ''" disabled class="font-hammersmith text-gray-100 text-xl leading-none rounded-lg bg-gray-600" style="padding: 7px 15px 6px;">
					CLICK TO DOWNLOAD
				</a>
				<a v-if="result != ''" :href="result" download tabindex="0" class="font-hammersmith text-pink-100 text-xl leading-none rounded-lg cursor-pointer bg-pink-600 hover:bg-pink-700 focus:bg-pink-700" style="padding: 7px 15px 6px;">
					CLICK TO DOWNLOAD
				</a>
				
				<p class="block mt-6 text-lg font-hammersmith text-gray-500">Made by <a class="cursor-pointer text-gray-600" href="https://arturs.site" target="_blank" tabindex="0">Arturs Dobrecovs</a></p>
			</div>
			<div class="flex-grow py-8"></div>
			
			<canvas ref="canvas" class="hidden" width="1200" height="1200"></canvas>
		</div>
		
		<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
		<script>
			var app = new Vue({
				el: '#app',
				data() {
					return {
						uploaded: null,
						slogan: -1,
						slogans: [
							"#THEPROGRESSTRAIN",
							"I SUPPORT #THEPROGRESSTRAIN",
							"I BELIEVE IN PROGRESS",
							"Pronouns: HE/HIM",
							"Pronouns: SHE/HER",
							"Pronouns: THEY/THEM",
							"Pronouns: HE/THEY",
							"Pronouns: SHE/THEY",
							"Pronouns: HE/SHE/THEY"
						],
						overlay: null,
						overlayKey: -1,
						result: "",
						images_loaded: 0
					}
				},
				methods: {
					chooseOverlay(key) {
						if (this.overlay != null && this.images_loaded == 2) {
							this.images_loaded = 1;
						} else if (this.overlay != null && this.images_loaded == 1) {
							this.images_loaded = 0;
						}
						
						this.slogan = key;
						var tempOverlayImage = new Image;
						tempOverlayImage.onload = this.tempImageLoaded;
						tempOverlayImage.src = "frames/" + key + ".png";
						this.overlay = tempOverlayImage;
						this.overlayKey = key;
					},
					startUpload() {
						this.$refs.imageUpload.click();
					},
					handleImage(e) {
						const selectedImage = e.target.files[0];
						this.createBase64Image(selectedImage);
					},
					createBase64Image(fileObject) {
						const reader = new FileReader();
						
						reader.onload = (e) => {
							if (this.uploaded != null && this.images_loaded == 2) {
								this.images_loaded = 1;
							} else if (this.uploaded != null && this.images_loaded == 1) {
								this.images_loaded = 0;
							}
							
							var tempUploadedImage = new Image;
							tempUploadedImage.onload = this.tempImageLoaded;
							tempUploadedImage.src = e.target.result;
							this.uploaded = tempUploadedImage;
						}
						
						reader.readAsDataURL(fileObject);
					},
					tempImageLoaded() {
						this.images_loaded++;
						
						if (this.images_loaded >= 2) {
							this.process();
						}
					},
					process() {
						var canvas = this.$refs.canvas;
						var context = canvas.getContext('2d');
						context.clearRect(0, 0, 1200, 1200);
						
						if (this.overlayKey > 2) {
							var offset = 90;
							var size = 1020;
						} else {
							var offset = 120;
							var size = 960;
						}
						
						context.drawImage(this.uploaded, offset, offset, size, size);
						context.drawImage(this.overlay, 0, 0, 1200, 1200);
						
						this.result = canvas.toDataURL('data/png');
					}
				}
			});
		</script>
	</body>
</html>